COMMAND init
SYNOPSIS: python3 scripts/spaider.py init [options]
DESCRIPTION: Initialize Spaider config and minimal adapter for a project
WORKFLOW: adapter

ARGUMENTS:

OPTIONS:
  --project-root  <path>  Project root directory to create .spaider-config.json in (default: parent of Spaider core)
  --spaider-root  <path>  Explicit Spaider core root (optional override)
  --adapter-path  <path>  Adapter directory path relative to project root (default: .spaider-adapter)
  --project-name  <string>  Project name used in adapter AGENTS.md (default: project root folder name)
  --yes  <boolean>  Do not prompt; accept defaults
  --dry-run  <boolean>  Compute changes without writing files
  --force  <boolean>  Overwrite existing files

EXIT CODES:
  0  Initialization successful
  1  Error (conflicts, invalid paths, etc.)

EXAMPLE:
  $ python3 scripts/spaider.py init
  $ python3 scripts/spaider.py init --yes
  $ python3 scripts/spaider.py init --project-root . --adapter-path .spaider-adapter --yes
  $ python3 scripts/spaider.py init --dry-run
  $ python3 scripts/spaider.py init --force

RELATED:
  - @CLI.adapter-info
  - @CLI.agents
  - @Workflow.adapter
---

COMMAND validate
SYNOPSIS: python3 scripts/spaider.py validate [--artifact <path>] [--skip-code] [options]
DESCRIPTION: Validate Spaider artifacts and code traceability. Validates structure against template, cross-references between artifacts, task statuses, and code traceability markers. By default validates both artifacts and code; use --skip-code to validate artifacts only.
WORKFLOW: design-validate, specs-validate, spec-validate, prd-validate, adr-validate, code-validate

ARGUMENTS:

OPTIONS:
  --artifact  <path>  Path to specific Spaider artifact (if omitted, validates all registered Spaider artifacts)
  --skip-code  <boolean>  Skip code traceability validation (by default, code is also validated)
  --verbose  <boolean>  Print full validation report (default: compact summary)
  --output  <path>  Save validation report to file (default: stdout)

EXIT CODES:
  0  Validation passed
  1  File system error or no adapter found
  2  Validation failed

OUTPUT:
  JSON object with:
  - status: PASS or FAIL
  - artifacts_validated: Number of artifacts checked
  - error_count: Total errors found
  - warning_count: Total warnings found
  - code_files_scanned: Number of code files checked (when code validation enabled)
  - to_code_ids_total: IDs marked to_code="true" (FULL traceability only)
  - code_ids_found: IDs found in code markers
  - coverage: Coverage ratio (found/required)
  - next_step: Hint for agent on what to do next (when PASS)

EXAMPLE:
  $ python3 scripts/spaider.py validate
  $ python3 scripts/spaider.py validate --skip-code
  $ python3 scripts/spaider.py validate --artifact architecture/PRD.md
  $ python3 scripts/spaider.py validate --verbose
  $ python3 scripts/spaider.py validate --output report.json

RELATED:
  - @CLI.list-ids
  - @CLI.where-defined
  - @CLI.where-used
  - @CLI.validate-weavers
  - @Workflow.design-validate
  - @Workflow.spec-validate
---

COMMAND validate-weavers
SYNOPSIS: python3 scripts/spaider.py validate-weavers [--weaver <id>] [--template <path>] [options]
DESCRIPTION: Validate Spaider weaver configuration and template files. Checks weaver definitions in artifacts.json and validates template frontmatter, paired markers, and valid marker types/attributes. (Legacy alias: validate-rules; legacy flag alias: --rule)
WORKFLOW: weavers

ARGUMENTS:

OPTIONS:
  --weaver  <id>  Weaver ID to validate (if omitted, validates all weavers)
  --template  <path>  Path to specific template file to validate
  --verbose  <boolean>  Print full validation report

EXIT CODES:
  0  Validation passed
  1  File system error or no adapter found
  2  Validation failed

OUTPUT:
  JSON object with:
  - status: PASS or FAIL
  - templates_validated: Number of templates checked
  - error_count: Total errors found
  - failed_templates: (non-verbose) List of templates that failed with error_count
  - errors: List of validation errors (config issues, structure issues, unclosed markers, etc.)

EXAMPLE:
  $ python3 scripts/spaider.py validate-weavers
  $ python3 scripts/spaider.py validate-weavers --weaver spaider-sdlc
  $ python3 scripts/spaider.py validate-weavers --template templates/PRD.template.md
  $ python3 scripts/spaider.py validate-weavers --verbose

RELATED:
  - @CLI.validate
  - @Workflow.rules
---

COMMAND list-ids
SYNOPSIS: python3 scripts/spaider.py list-ids [--artifact <path>] [options]
DESCRIPTION: List all Spaider IDs from artifacts using template-based parsing. If no artifact is specified, scans all Spaider-format artifacts registered in the adapter. Use --include-code to also scan code files for Spaider marker references.

ARGUMENTS:

OPTIONS:
  --artifact  <path>  Path to Spaider artifact file (optional - if omitted, scans all registered Spaider artifacts)
  --pattern  <string>  Filter IDs by substring or regex pattern
  --regex  <boolean>  Treat pattern as regular expression
  --kind  <string>  Filter by ID kind from template markers (e.g., 'requirement', 'spec', 'actor')
  --all  <boolean>  Include duplicate IDs in results
  --include-code  <boolean>  Also scan code files for Spaider marker references

EXIT CODES:
  0  Success
  1  File system error, artifact not found, or no adapter found

OUTPUT:
  JSON object with:
  - count: Number of IDs found
  - artifacts_scanned: Number of artifacts scanned
  - code_files_scanned: Number of code files scanned (when --include-code)
  - ids: List of ID objects with id, kind, type, artifact_type, line, artifact, checked

EXAMPLE:
  $ python3 scripts/spaider.py list-ids
  $ python3 scripts/spaider.py list-ids --artifact architecture/PRD.md
  $ python3 scripts/spaider.py list-ids --pattern "-actor-"
  $ python3 scripts/spaider.py list-ids --kind requirement
  $ python3 scripts/spaider.py list-ids --include-code
  $ python3 scripts/spaider.py list-ids --artifact architecture/DESIGN.md --pattern "spec-.*" --regex

RELATED:
  - @CLI.where-defined
  - @CLI.get-content
  - @CLI.validate
---

COMMAND list-id-kinds
SYNOPSIS: python3 scripts/spaider.py list-id-kinds [--artifact <path>]
DESCRIPTION: List ID kinds that actually exist in artifacts. Parses artifacts against their templates and returns only kinds that have at least one ID definition.

ARGUMENTS:

OPTIONS:
  --artifact  <path>  Scan specific artifact (if omitted, scans all registered Spaider artifacts)

EXIT CODES:
  0  Success
  1  File system error, no adapter found, or artifact not in registry

OUTPUT:
  JSON object with:
  - kinds: List of ID kinds found in artifact(s)
  - kind_counts: Mapping of kind -> count of IDs
  - kind_to_templates: Mapping of kind -> list of template types where found
  - template_to_kinds: Mapping of template type -> list of kinds found
  - artifacts_scanned: Number of artifacts scanned

EXAMPLE:
  $ python3 scripts/spaider.py list-id-kinds
  $ python3 scripts/spaider.py list-id-kinds --artifact architecture/PRD.md

RELATED:
  - @CLI.list-ids
---

COMMAND get-content
SYNOPSIS: python3 scripts/spaider.py get-content (--artifact <path> | --code <path>) --id <string> [--inst <string>]
DESCRIPTION: Get content block for a specific Spaider ID. Works with both artifacts (template-based parsing) and code files (Spaider marker parsing).

ARGUMENTS:

OPTIONS:
  --artifact  <path>  Path to Spaider artifact file (mutually exclusive with --code)
  --code  <path>  Path to code file (mutually exclusive with --artifact)
  --id  <string>  required  Spaider ID to retrieve content for
  --inst  <string>  Instruction ID for code blocks (e.g., 'inst-validate-input')

EXIT CODES:
  0  Success
  1  File system error or file not found
  2  ID not found

EXAMPLE:
  $ python3 scripts/spaider.py get-content --artifact architecture/PRD.md --id spd-myapp-actor-admin
  $ python3 scripts/spaider.py get-content --artifact architecture/DESIGN.md --id spd-myapp-req-auth
  $ python3 scripts/spaider.py get-content --code src/auth.py --id spd-myapp-spec-auth-flow-login
  $ python3 scripts/spaider.py get-content --code src/auth.py --id spd-myapp-spec-auth-flow-login --inst inst-validate-creds

RELATED:
  - @CLI.list-ids
  - @CLI.validate
---

COMMAND adapter-info
SYNOPSIS: python3 scripts/spaider.py adapter-info [options]
DESCRIPTION: Discover Spaider adapter configuration and location in a project

ARGUMENTS:

OPTIONS:
  --root  <path>  Project root directory to search from (default: current directory)
  --spaider-root  <path>  Known Spaider core location for enhanced validation

EXIT CODES:
  0  Adapter found
  1  File system error
  2  Adapter not found

EXAMPLE:
  $ python3 scripts/spaider.py adapter-info
  $ python3 scripts/spaider.py adapter-info --root /path/to/project
  $ python3 scripts/spaider.py adapter-info --root . --spaider-root ../Spaider

RELATED:
  - @Workflow.adapter
---

COMMAND where-defined
SYNOPSIS: python3 scripts/spaider.py where-defined --id <id> [options]
DESCRIPTION: Find where an Spaider ID is defined using template-based parsing. Scans all registered Spaider artifacts.

ARGUMENTS:
  id  <string>  required  Spaider ID to find definition for

OPTIONS:
  --artifact  <path>  Limit search to specific artifact (optional)

EXIT CODES:
  0  Exactly one definition found
  1  File system error or no adapter found
  2  ID not found or ambiguous (multiple definitions)

EXAMPLE:
  $ python3 scripts/spaider.py where-defined --id spd-myapp-actor-admin
  $ python3 scripts/spaider.py where-defined --id spd-myapp-req-auth
  $ python3 scripts/spaider.py where-defined --id spd-myapp-spec-auth --artifact architecture/DECOMPOSITION.md

RELATED:
  - @CLI.where-used
  - @CLI.list-ids
  - @CLI.get-content
---

COMMAND where-used
SYNOPSIS: python3 scripts/spaider.py where-used --id <id> [options]
DESCRIPTION: Find all references to an Spaider ID using template-based parsing. Scans all registered Spaider artifacts.

ARGUMENTS:
  id  <string>  required  Spaider ID to find references for

OPTIONS:
  --artifact  <path>  Limit search to specific artifact (optional)
  --include-definitions  <boolean>  Include definitions in results (default: references only)

EXIT CODES:
  0  Success (references found or not found)
  1  File system error or no adapter found

EXAMPLE:
  $ python3 scripts/spaider.py where-used --id spd-myapp-actor-admin
  $ python3 scripts/spaider.py where-used --id spd-myapp-req-auth
  $ python3 scripts/spaider.py where-used --id spd-myapp-spec-auth --artifact architecture/DESIGN.md

RELATED:
  - @CLI.where-defined
  - @CLI.list-ids
  - @CLI.get-content
---

COMMAND agents
SYNOPSIS: python3 scripts/spaider.py agents --agent <name> [options]
DESCRIPTION: Generate/update agent-specific workflow proxies and skill outputs. Creates unified proxy files for workflows (spaider-generate, spaider-analyze, spaider-adapter, spaider-rules) and the spaider skill entry point. Supports windsurf, cursor, claude, copilot.
WORKFLOW: adapter

ARGUMENTS:

OPTIONS:
  --agent  <string>  required  Agent/IDE key (windsurf, cursor, claude, copilot)
  --root  <path>  Project root directory to search from (default: current directory)
  --spaider-root  <path>  Explicit Spaider core root (optional override)
  --config  <path>  Path to unified agents config JSON (default: {project-root}/spaider-agents.json)
  --dry-run  <boolean>  Compute changes without writing files

EXIT CODES:
  0  Success (all workflows and skills synced)
  1  Error (invalid args, missing project root, invalid config)

OUTPUT:
  JSON object with:
  - status: PASS or PARTIAL
  - agent: Agent name
  - workflows: Object with created/updated/renamed/deleted counts
  - skills: Object with created/updated counts and outputs list
  - errors: List of errors if any

EXAMPLE:
  $ python3 scripts/spaider.py agents --agent windsurf
  $ python3 scripts/spaider.py agents --agent claude --dry-run
  $ python3 scripts/spaider.py agents --agent cursor

RELATED:
  - @CLI.init
  - @CLI.adapter-info
  - @Workflow.adapter

---

COMMAND self-check
SYNOPSIS: python3 scripts/spaider.py self-check [--weaver <id>] [--verbose]
DESCRIPTION: Validate example artifacts against their templates (template QA). For each weaver package, checks that example.md passes validation against template.md. Ensures templates and examples remain synchronized. (Legacy flag alias: --rule)
WORKFLOW: weavers

ARGUMENTS:

OPTIONS:
  --weaver  <id>  Weaver ID to check (if omitted, checks all weavers)
  --verbose  <boolean>  Print detailed validation report

EXIT CODES:
  0  All examples pass validation
  1  File system error or no adapter found
  2  One or more examples failed validation

OUTPUT:
  JSON object with:
  - status: PASS or FAIL
  - weavers_checked: Number of weavers checked
  - templates_checked: Number of templates checked
  - results: Per-template results
  - pass_count: Examples that passed
  - fail_count: Examples that failed
  - failures: List of failed examples with error details

EXAMPLE:
  $ python3 scripts/spaider.py self-check
  $ python3 scripts/spaider.py self-check --weaver spaider-sdlc
  $ python3 scripts/spaider.py self-check --verbose

RELATED:
  - @CLI.validate-weavers
  - @CLI.validate
  - @Workflow.rules
